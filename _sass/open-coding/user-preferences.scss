:root {
  --pref-bg-color: #0b1220;
  --pref-text-color: #e6eef8;
  --pref-font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  --pref-font-size: 14px;
  --pref-content-max-width: 1200px;
}

// Base overrides for root and body  JS sets vars, SCSS enforces them.
html,
body {
  background-color: var(--pref-bg-color) !important;
  color: var(--pref-text-color) !important;
  font-family: var(--pref-font-family) !important;
  font-size: var(--pref-font-size) !important;
}

// When the theme is active, aggressively restyle key containers and text.
// We target common layout wrappers so large dark blocks also get recolored.

// Root and major shells
.user-theme-active {
  &, & body, & body.dark, & body.min-h-screen, & body.bg-neutral-800,
  & .min-h-screen, & .min-h-screen.bg-neutral-900,
  & .ml-64.p-8, & .ml-64.p-8.bg-neutral-900 {
    color: var(--text) !important;
    background-color: var(--background) !important;
  }

  // Make sure all normal text inherits theme colors.
  // We intentionally leave very specific utility classes (e.g. text-red-500)
  // alone, but OpenCS content should follow the user text color.
  * {
    color: var(--text) !important;
  }

  // OpenCS content areas should also inherit user text color and font
  .opencs_root,
  .opencs_root *,
  .opencs_root .post-header,
  .opencs_root .post-content {
    color: var(--text) !important;
    font-family: var(--pref-font-family) !important;
    font-size: var(--pref-font-size) !important;
  }

  // Minima + generic content wrappers
  .page-content,
  .wrapper,
  main,
  article,
  .post,
  .content,
  .opencs_root {
    // Ensure OpenCS layout can't override the themed background vars
    --background: var(--pref-bg-color) !important;
    --text: var(--pref-text-color) !important;
    background-color: var(--background) !important;
  }

  .card,
  .panel,
  .box,
  .bg-neutral-800,
  .bg-neutral-900,
  .bg-slate-800,
  .bg-slate-900,
  // Other common dark Tailwind backgrounds used in posts/dashboards
  .bg-gray-900,
  .bg-gray-950,
  .bg-zinc-900,
  .bg-slate-950 {
    background-color: var(--panel) !important;
    border-color: var(--ui-border) !important;
  }

  .border-neutral-700,
  .border-neutral-800,
  .border-gray-800,
  .border-gray-900,
  .border-zinc-800 {
    border-color: var(--ui-border) !important;
  }

  img,
  video,
  svg,
  iframe {
    background-color: transparent !important;
  }

  input,
  select,
  textarea {
    background-color: var(--ui-bg) !important;
    color: var(--text) !important;
    border: 1px solid var(--ui-border) !important;
  }

  button {
    background-color: var(--ui-bg) !important;
    color: var(--text) !important;
    border: 1px solid var(--ui-border) !important;
  }

  aside,
  .sidebar,
  #sidebar,
  .site-sidebar,
  .sidebar-container {
    background-color: var(--panel-mid) !important;
    color: var(--text) !important;
    border-color: var(--ui-border) !important;
  }
}

// Constrain main content wrapper if present
.w-full {
  max-width: var(--pref-content-max-width);
  margin: 0 auto;
}
